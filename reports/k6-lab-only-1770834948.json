{
  "metadata": {
    "timestamp": "2026-02-11T18:35:59.043Z",
    "testRun": "k6-lab-only-1770834948",
    "namespace": "albarbaro-load-test",
    "testScript": "lab-only",
    "pod": "backstage-rhdh-5b6dc4f9b7-w2nc5"
  },
  "prometheus": {
    "memory": {
      "resultType": "matrix",
      "result": [
        {
          "metric": {
            "__name__": "container_memory_working_set_bytes",
            "container": "backstage-backend",
            "endpoint": "https-metrics",
            "id": "/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod49914141_7c3e_4a34_9b6b_747bbb186131.slice/crio-8bb2557ebc9fa925f44ebfba35885c341f648f22dff1cdd96630a47caa17db48.scope",
            "image": "quay.io/rhdh/rhdh-hub-rhel9@sha256:b74fae9591332cade97d995f791140148ea9a0932d95a20d7cfe153ab97165d4",
            "instance": "10.241.0.4:10250",
            "job": "kubelet",
            "metrics_path": "/metrics/cadvisor",
            "name": "k8s_backstage-backend_backstage-rhdh-5b6dc4f9b7-w2nc5_albarbaro-load-test_49914141-7c3e-4a34-9b6b-747bbb186131_0",
            "namespace": "albarbaro-load-test",
            "node": "10.241.0.4",
            "pod": "backstage-rhdh-5b6dc4f9b7-w2nc5",
            "prometheus": "openshift-monitoring/k8s",
            "service": "kubelet"
          },
          "values": [
            [
              1770834658,
              "770674688"
            ],
            [
              1770834688,
              "770510848"
            ],
            [
              1770834718,
              "770519040"
            ],
            [
              1770834748,
              "770510848"
            ],
            [
              1770834778,
              "770506752"
            ],
            [
              1770834808,
              "770506752"
            ],
            [
              1770834838,
              "770506752"
            ],
            [
              1770834868,
              "770506752"
            ],
            [
              1770834898,
              "770506752"
            ],
            [
              1770834928,
              "770506752"
            ],
            [
              1770834958,
              "770506752"
            ]
          ]
        }
      ],
      "analysis": {}
    }
  },
  "postgres": {
    "databases": [
      "backstage_plugin_adoption-insights",
      "backstage_plugin_app",
      "backstage_plugin_auth",
      "backstage_plugin_catalog",
      "backstage_plugin_dynamic-plugins-info",
      "backstage_plugin_events",
      "backstage_plugin_extensions",
      "backstage_plugin_healthcheck",
      "backstage_plugin_licensed-users-info",
      "backstage_plugin_permission",
      "backstage_plugin_proxy",
      "backstage_plugin_scaffolder",
      "backstage_plugin_scalprum",
      "backstage_plugin_search",
      "backstage_plugin_techdocs",
      "backstage_plugin_translations",
      "backstage_plugin_user-settings",
      "keycloak",
      "postgres",
      "rhdh"
    ],
    "stat_statements": [
      {
        "rows": 7513376,
        "query": "select * from \"refresh_state_references\" where \"target_entity_ref\" in ($1)",
        "calls": 7513376,
        "mean_exec_time": 0.02343055637918529,
        "total_exec_time": 176042.5799660091,
        "stddev_exec_time": 0.016351987428576714
      },
      {
        "calls": 589152,
        "mean_exec_time": 0.23533080634029896,
        "total_exec_time": 138645.6152170047,
        "stddev_exec_time": 0.11945382737366182,
        "rows": 3534912,
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $7 where \"entity_ref\" in ($1, $2, $3, $4, $5, $6)"
      },
      {
        "query": "select \"entity_id\", \"entity_ref\", \"unprocessed_entity\", \"result_hash\", \"cache\", \"errors\", \"location_key\", \"next_update_at\" from \"refresh_state\" where \"next_update_at\" <= CURRENT_TIMESTAMP order by \"next_update_at\" asc limit $1 for update skip locked",
        "calls": 1409666,
        "mean_exec_time": 0.09746942476161506,
        "total_exec_time": 137399.33412599904,
        "stddev_exec_time": 0.1024150366232907,
        "rows": 7514059
      },
      {
        "stddev_exec_time": 0.09298292216922234,
        "rows": 3196195,
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $6 where \"entity_ref\" in ($1, $2, $3, $4, $5)",
        "calls": 639239,
        "mean_exec_time": 0.20724013123416588,
        "total_exec_time": 132475.9742500012
      },
      {
        "stddev_exec_time": 1.814723352763777,
        "rows": 0,
        "query": "with \"orphans\"(\"entity_id\", \"entity_ref\") as (select \"refresh_state\".\"entity_id\", \"refresh_state\".\"entity_ref\" from \"refresh_state\" left outer join \"refresh_state_references\" on \"refresh_state_references\".\"target_entity_ref\" = \"refresh_state\".\"entity_ref\" where \"refresh_state_references\".\"target_entity_ref\" is null) select \"orphans\".\"entity_id\" as \"entityId\", \"refresh_state\".\"entity_id\" as \"relationSourceId\" from \"orphans\" left outer join \"relations\" on \"relations\".\"target_entity_ref\" = \"orphans\".\"entity_ref\" left outer join \"refresh_state\" on \"refresh_state\".\"entity_ref\" = \"relations\".\"source_entity_ref\"",
        "calls": 2857,
        "mean_exec_time": 10.767065226461336,
        "total_exec_time": 30761.505351999982
      },
      {
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $11 where \"entity_ref\" in ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)",
        "calls": 65451,
        "mean_exec_time": 0.3889022042596738,
        "total_exec_time": 25454.038170999822,
        "stddev_exec_time": 0.07863178956667993,
        "rows": 654510
      },
      {
        "stddev_exec_time": 7.393883737998391,
        "rows": 1504360,
        "query": "with \"filtered\"(\"entity_id\", \"final_entity\") as (select \"final_entities\".\"entity_id\" as \"entity_id\", \"final_entities\".\"final_entity\" as \"final_entity\" from \"final_entities\" where \"final_entity\" is not null) select * from \"filtered\" where \"entity_id\" > $1 order by \"filtered\".\"entity_id\" asc limit $2",
        "calls": 3003,
        "mean_exec_time": 5.382364627372621,
        "total_exec_time": 16163.240976000001
      },
      {
        "mean_exec_time": 0.0019150213672046554,
        "total_exec_time": 14389.813341998199,
        "stddev_exec_time": 0.004391579430489091,
        "rows": 0,
        "query": "BEGIN",
        "calls": 7514179
      },
      {
        "stddev_exec_time": 0.00204683983922691,
        "rows": 0,
        "query": "COMMIT",
        "calls": 7514179,
        "mean_exec_time": 0.0011470207676715733,
        "total_exec_time": 8618.91936499594
      },
      {
        "query": "with \"filtered\"(\"entity_id\", \"final_entity\") as (select \"final_entities\".\"entity_id\" as \"entity_id\", \"final_entities\".\"final_entity\" as \"final_entity\" from \"final_entities\" where \"final_entity\" is not null), \"filtered_count\"(\"count\") as (select count(*) as \"count\" from \"filtered\") select \"count\", \"filtered\".* from filtered_count, filtered order by \"filtered\".\"entity_id\" asc limit $1",
        "calls": 143,
        "mean_exec_time": 28.665194965034956,
        "total_exec_time": 4099.12288,
        "stddev_exec_time": 10.03483089681144,
        "rows": 71643
      },
      {
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $5 where \"entity_ref\" in ($1, $2, $3, $4)",
        "calls": 12279,
        "mean_exec_time": 0.1710506135678805,
        "total_exec_time": 2100.3304839999964,
        "stddev_exec_time": 0.028935000110928696,
        "rows": 49116
      },
      {
        "total_exec_time": 1833.499881999993,
        "stddev_exec_time": 0.009880803337629541,
        "rows": 85616,
        "query": "select \"settings_json\" as \"settingsJson\", CASE\n            WHEN next_run_start_at <= CURRENT_TIMESTAMP AND current_run_ticket IS NULL THEN $2\n            ELSE $3\n          END as \"ready\" from \"backstage_backend_tasks__tasks\" where \"id\" = $1",
        "calls": 85616,
        "mean_exec_time": 0.021415388268547962
      },
      {
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $4 where \"entity_ref\" in ($1, $2, $3)",
        "calls": 11870,
        "mean_exec_time": 0.13756544422914982,
        "total_exec_time": 1632.9018230000008,
        "stddev_exec_time": 0.05153631015477223,
        "rows": 35610
      },
      {
        "stddev_exec_time": 0.007719052379194339,
        "rows": 0,
        "query": "select \"entity_ref\", \"next_stitch_at\", \"next_stitch_ticket\" from \"refresh_state\" where \"next_stitch_at\" is not null and \"next_stitch_ticket\" is not null and \"next_stitch_at\" <= CURRENT_TIMESTAMP order by \"next_stitch_at\" asc limit $1 for update skip locked",
        "calls": 85362,
        "mean_exec_time": 0.016403697453199435,
        "total_exec_time": 1400.2524220000137
      },
      {
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $3 where \"entity_ref\" in ($1, $2)",
        "calls": 12043,
        "mean_exec_time": 0.10770039001909788,
        "total_exec_time": 1297.0357969999993,
        "stddev_exec_time": 0.1287011776597021,
        "rows": 24086
      },
      {
        "stddev_exec_time": 0.013459265765356434,
        "rows": 12664,
        "query": "update \"refresh_state\" set \"next_update_at\" = now() + interval $2 where \"entity_ref\" in ($1)",
        "calls": 12664,
        "mean_exec_time": 0.06982058717624767,
        "total_exec_time": 884.207915999998
      },
      {
        "calls": 34161,
        "mean_exec_time": 0.02272257460261716,
        "total_exec_time": 776.2258709999995,
        "stddev_exec_time": 0.008854959146834849,
        "rows": 34161,
        "query": "select \"settings_json\" as \"settingsJson\", CASE\n            WHEN next_run_start_at <= CURRENT_TIMESTAMP AND current_run_ticket IS NULL THEN $2\n            ELSE $3\n          END as \"ready\" from \"backstage_backend_tasks__tasks\" where \"id\" = $1"
      },
      {
        "query": "select \"settings_json\" as \"settingsJson\", CASE\n            WHEN next_run_start_at <= CURRENT_TIMESTAMP AND current_run_ticket IS NULL THEN $2\n            ELSE $3\n          END as \"ready\" from \"backstage_backend_tasks__tasks\" where \"id\" = $1",
        "calls": 17128,
        "mean_exec_time": 0.028504254145259277,
        "total_exec_time": 488.2208650000022,
        "stddev_exec_time": 0.01122834126786109,
        "rows": 17128
      },
      {
        "query": "CREATE TEMP TABLE documents_to_insert (type text NOT NULL, document jsonb NOT NULL, hash bytea NOT NULL GENERATED ALWAYS AS (sha256(replace(document::text || type, '\\', '\\\\')::bytea)) STORED) ON COMMIT DROP",
        "calls": 286,
        "mean_exec_time": 1.5734440874125875,
        "total_exec_time": 450.00500900000014,
        "stddev_exec_time": 0.5905947571709861,
        "rows": 0
      },
      {
        "query": "select \"refresh_state_references\".\"target_entity_ref\" as \"target_entity_ref\", \"refresh_state\".\"location_key\" as \"location_key\", \"refresh_state\".\"unprocessed_hash\" as \"unprocessed_hash\" from \"refresh_state_references\" left join \"refresh_state\" on \"target_entity_ref\" = \"entity_ref\" where \"source_key\" = $1",
        "calls": 120,
        "mean_exec_time": 3.506324833333333,
        "total_exec_time": 420.75898000000007,
        "stddev_exec_time": 7.030535600274531,
        "rows": 264000
      }
    ],
    "stat_user_tables": [],
    "stat_user_indexes": []
  },
  "errors": []
}